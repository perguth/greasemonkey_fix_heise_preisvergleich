// ==UserScript==
// @name        fix_heise_preisvergleich
// @namespace   http://perguth.de
// @description Put the hardware specs into a sane form.
// @include     http://www.heise.de/preisvergleich/*
// @include     https://www.heise.de/preisvergleich/*
// @include     */fix_heise_preisvergleich/*
// @version     1
// @grant       none
// ==/UserScript==
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

function getSpecs() {
  var name = document.getElementById('mitte_preisvergleicher').getElementsByTagName('h1')[0].querySelectorAll('.notrans')[0].firstChild.data;
  var specs = document.getElementById('gh_proddesc').querySelectorAll('.notrans')[0].firstChild.data;
  specs = parseSpecString(specs);
  return { name: name, specs: specs };
}
function parseSpecString(string) {
  string = string.split('â€¢');
  return string.map(function (val) {
    return val.split(':');
  });
}
function filterSpecialPairs(val) {
  if (val[1].trim() === 'N/A' && val[0].trim() === 'optisches Laufwerk') return new Array('', 'kein optisches Laufwerk');else return val;
}
function filterSpecKeys(val) {
  switch (val[0].trim()) {
    case 'CPU':
    case 'Festplatte':
    case 'Grafik':
    case 'Display':
    case 'Wireless':
    case 'Betriebssystem':
    case 'Gewicht':
    case 'Besonderheiten':
      break;
    default:
      return val;
  }
  return new Array('', val[1]);
}
function filterSpecValues(val, i, array) {
  if (val[1].trim() === '' || val[1].trim() === 'N/A') return false;
  return true;
}
function fixSpec(val) {
  console.log(val);
  switch (val.trim()) {
    case 'zwei Jahre':
      return '24M';
    case 'Windows 7 Professional 64bit':
      return 'Win 7 Pro 64';
    case 'Windows 8.1 Pro 64bit':
      return 'Win 8.1 Pro 64';
    case 'Windows 8.1 64bit':
      return 'Win 8.1 64';
    case 'USB 3.0':
      return 'USB3';
    case 'USB 2.0':
      return 'USB2';
    case 'Gb LAN':
      return 'Gbit LAN';
    case '1.0 Megapixel':
      return '1.0 MP';
    case '2.0 Megapixel':
      return '2.0 MP';
    case '3.0 Megapixel':
      return '3.0 MP';
    case '4.0 Megapixel':
      return '4.0 MP';
    case '5.0 Megapixel':
      return '5.0 MP';
    default:
      return val;
  }
}
function makeList(val, i, array) {
  console.log(i);
  var entry = '';
  if (val[0].trim() !== '') entry = val[0] + ': ' + val[1].trim();else entry = val[1].trim();
  if (i < array.length - 1) return entry + ', ';else return entry;
}
function createNewSpecString() {
  var _getSpecs = getSpecs();

  var name = _getSpecs.name;
  var specs = _getSpecs.specs;

  specs = specs.map(filterSpecialPairs).map(filterSpecKeys).filter(filterSpecValues).map(function (val) {
    return new Array(val[0], fixSpec(val[1]));
  }).map(makeList).join('');
  return name + '<br><br>' + specs;
}
function fixWebsite() {
  document.getElementById('gh_proddesc').querySelectorAll('.notrans')[0].innerHTML = createNewSpecString();
}

fixWebsite();

},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvaG9tZS9wZ3V0aC9naXRodWIvZml4X2hlaXNlX3ByZWlzdmVyZ2xlaWNoL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxTQUFTLFFBQVEsR0FBSTtBQUNuQixNQUFJLElBQUksR0FDTCxRQUFRLENBQUMsY0FBYyxDQUFDLHdCQUF3QixDQUFDLENBQ2pELG9CQUFvQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUM3QixnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDL0IsVUFBVSxDQUFDLElBQUksQ0FBQTtBQUNsQixNQUFJLEtBQUssR0FDTixRQUFRLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUN0QyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDL0IsVUFBVSxDQUFDLElBQUksQ0FBQTtBQUNsQixPQUFLLEdBQUcsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQzlCLFNBQU8sRUFBQyxJQUFJLEVBQUosSUFBSSxFQUFFLEtBQUssRUFBTCxLQUFLLEVBQUMsQ0FBQTtDQUNyQjtBQUNELFNBQVMsZUFBZSxDQUFFLE1BQU0sRUFBRTtBQUNoQyxRQUFNLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQTtBQUMxQixTQUFPLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBQSxHQUFHO1dBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7R0FBQSxDQUFDLENBQUE7Q0FDekM7QUFDRCxTQUFTLGtCQUFrQixDQUFFLEdBQUcsRUFBRTtBQUNoQyxNQUNFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxLQUFLLElBQ3ZCLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxv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QUs7O0FBQ2hCLE9BQUssR0FBRyxLQUFLLENBQ1YsR0FBRyxDQUFDLGtCQUFrQixDQUFDLENBQ3ZCLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FDbkIsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQ3hCLEdBQUcsQ0FBQyxVQUFBLEdBQUc7V0FBSSxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0dBQUEsQ0FBQyxDQUM5QyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQ2IsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFBO0FBQ1gsU0FBTyxJQUFJLEdBQUcsVUFBVSxHQUFHLEtBQUssQ0FBQTtDQUNqQztBQUNELFNBQVMsVUFBVSxHQUFJO0FBQ3JCLFVBQVEsQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQ25DLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsR0FDMUMsbUJBQW1CLEVBQUUsQ0FBQTtDQUN4Qjs7QUFFRCxVQUFVLEVBQUUsQ0FBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJmdW5jdGlvbiBnZXRTcGVjcyAoKSB7XG4gIGxldCBuYW1lID0gXG4gICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaXR0ZV9wcmVpc3ZlcmdsZWljaGVyJylcbiAgICAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2gxJylbMF1cbiAgICAucXVlcnlTZWxlY3RvckFsbCgnLm5vdHJhbnMnKVswXVxuICAgIC5maXJzdENoaWxkLmRhdGFcbiAgbGV0IHNwZWNzID0gXG4gICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnaF9wcm9kZGVzYycpXG4gICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub3RyYW5zJylbMF1cbiAgICAuZmlyc3RDaGlsZC5kYXRhXG4gIHNwZWNzID0gcGFyc2VTcGVjU3RyaW5nKHNwZWNzKVxuICByZXR1cm4ge25hbWUsIHNwZWNzfVxufVxuZnVuY3Rpb24gcGFyc2VTcGVjU3RyaW5nIChzdHJpbmcpIHtcbiAgc3RyaW5nID0gc3RyaW5nLnNwbGl0KCfigKInKVxuICByZXR1cm4gc3RyaW5nLm1hcCh2YWwgPT4gdmFsLnNwbGl0KCc6JykpXG59XG5mdW5jdGlvbiBmaWx0ZXJTcGVjaWFsUGFpcnMgKHZhbCkge1xuICBpZiAoXG4gICAgdmFsWzFdLnRyaW0oKSA9PT0gJ04vQScgJiZcbiAgICB2YWxbMF0udHJpbSgpID09PSAnb3B0aXNjaGVzIExhdWZ3ZXJrJ1xuICApIHJldHVybiBuZXcgQXJyYXkoJycsICdrZWluIG9wdGlzY2hlcyBMYXVmd2VyaycpXG4gIGVsc2UgcmV0dXJuIHZhbFxufVxuZnVuY3Rpb24gZmlsdGVyU3BlY0tleXMgKHZhbCkge1xuICBzd2l0Y2ggKHZhbFswXS50cmltKCkpIHtcbiAgICBjYXNlICdDUFUnOlxuICAgIGNhc2UgJ0Zlc3RwbGF0dGUnOlxuICAgIGNhc2UgJ0dyYWZpayc6XG4gICAgY2FzZSAnRGlzcGxheSc6XG4gICAgY2FzZSAnV2lyZWxlc3MnOlxuICAgIGNhc2UgJ0JldHJpZWJzc3lzdGVtJzpcbiAgICBjYXNlICdHZXdpY2h0JzogXG4gICAgY2FzZSAnQmVzb25kZXJoZWl0ZW4nOlxuICAgIGJyZWFrXG4gICAgZGVmYXVsdDogcmV0dXJuIHZhbFxuICB9XG4gIHJldHVybiBuZXcgQXJyYXkoJycsIHZhbFsxXSlcbn1cbmZ1bmN0aW9uIGZpbHRlclNwZWNWYWx1ZXMgKHZhbCwgaSwgYXJyYXkpIHtcbiAgaWYgKFxuICAgIHZhbFsxXS50cmltKCkgPT09ICcnIHx8IFxuICAgIHZhbFsxXS50cmltKCkgPT09ICdOL0EnXG4gICkgcmV0dXJuIGZhbHNlXG4gIHJldHVybiB0cnVlXG59XG5mdW5jdGlvbiBmaXhTcGVjICh2YWwpIHtcbiAgY29uc29sZS5sb2codmFsKVxuICBzd2l0Y2ggKHZhbC50cmltKCkpIHtcbiAgICBjYXNlICd6d2VpIEphaHJlJzogcmV0dXJuIFwiMjRNXCJcbiAgICBjYXNlICdXaW5kb3dzIDcgUHJvZmVzc2lvbmFsIDY0Yml0JzogcmV0dXJuIFwiV2luIDcgUHJvIDY0XCJcbiAgICBjYXNlICdXaW5kb3dzIDguMSBQcm8gNjRiaXQnOiByZXR1cm4gXCJXaW4gOC4xIFBybyA2NFwiXG4gICAgY2FzZSAnV2luZG93cyA4LjEgNjRiaXQnOiByZXR1cm4gXCJXaW4gOC4xIDY0XCJcbiAgICBjYXNlICdVU0IgMy4wJzogcmV0dXJuIFwiVVNCM1wiXG4gICAgY2FzZSAnVVNCIDIuMCc6IHJldHVybiBcIlVTQjJcIlxuICAgIGNhc2UgJ0diIExBTic6IHJldHVybiBcIkdiaXQgTEFOXCJcbiAgICBjYXNlICcxLjAgTWVnYXBpeGVsJzogcmV0dXJuIFwiMS4wIE1QXCJcbiAgICBjYXNlICcyLjAgTWVnYXBpeGVsJzogcmV0dXJuIFwiMi4wIE1QXCJcbiAgICBjYXNlICczLjAgTWVnYXBpeGVsJzogcmV0dXJuIFwiMy4wIE1QXCJcbiAgICBjYXNlICc0LjAgTWVnYXBpeGVsJzogcmV0dXJuIFwiNC4wIE1QXCJcbiAgICBjYXNlICc1LjAgTWVnYXBpeGVsJzogcmV0dXJuIFwiNS4wIE1QXCJcbiAgICBkZWZhdWx0OiByZXR1cm4gdmFsXG4gIH1cbn1cbmZ1bmN0aW9uIG1ha2VMaXN0ICh2YWwsIGksIGFycmF5KSB7XG4gIGNvbnNvbGUubG9nKGkpXG4gIGxldCBlbnRyeSA9ICcnXG4gIGlmICh2YWxbMF0udHJpbSgpICE9PSAnJylcbiAgICBlbnRyeSA9IHZhbFswXSArICc6ICcgKyB2YWxbMV0udHJpbSgpXG4gIGVsc2VcbiAgICBlbnRyeSA9IHZhbFsxXS50cmltKClcbiAgaWYgKGkgPCBhcnJheS5sZW5ndGggLTEpIHJldHVybiBlbnRyeSArICcsICdcbiAgZWxzZSByZXR1cm4gZW50cnlcbn1cbmZ1bmN0aW9uIGNyZWF0ZU5ld1NwZWNTdHJpbmcoKSB7XG4gIGxldCB7bmFtZSwgc3BlY3N9ID0gZ2V0U3BlY3MoKVxuICBzcGVjcyA9IHNwZWNzXG4gICAgLm1hcChmaWx0ZXJTcGVjaWFsUGFpcnMpXG4gICAgLm1hcChmaWx0ZXJTcGVjS2V5cylcbiAgICAuZmlsdGVyKGZpbHRlclNwZWNWYWx1ZXMpXG4gICAgLm1hcCh2YWwgPT4gbmV3IEFycmF5KHZhbFswXSwgZml4U3BlYyh2YWxbMV0pKSlcbiAgICAubWFwKG1ha2VMaXN0KVxuICAgIC5qb2luKCcnKVxuICByZXR1cm4gbmFtZSArICc8YnI+PGJyPicgKyBzcGVjc1xufVxuZnVuY3Rpb24gZml4V2Vic2l0ZSAoKSB7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnaF9wcm9kZGVzYycpXG4gICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub3RyYW5zJylbMF0uaW5uZXJIVE1MID0gXG4gICAgY3JlYXRlTmV3U3BlY1N0cmluZygpXG59XG5cbmZpeFdlYnNpdGUoKVxuXG4iXX0=
